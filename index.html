<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAC Pagarnusa Kemang</title>
    <meta name="description" content="Media Resmi PAC Pagar Nusa Kecamatan Kemang - Kabupaten Bogor. Menyajikan berita terkini, opini, dan khazanah pencak silat NU.">
    <meta name="author" content="Infokom Pagar Nusa Kemang">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --pn-green: #2d6a4f; --pn-dark: #1b4332; --pn-light: #d8f3dc; }
        body { font-family: 'Roboto', sans-serif; scroll-behavior: smooth; color: #334155; }
        .nav-font { font-family: 'Oswald', sans-serif; }
        .bg-pn { background-color: var(--pn-green); }
        .text-pn { color: var(--pn-green); }
        .border-pn { border-color: var(--pn-green); }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .shimmer { 
            background: linear-gradient(90deg, #f8fafc 25%, #f1f5f9 50%, #f8fafc 75%); 
            background-size: 200% 100%; 
            animation: shimmer 2s infinite ease-out; 
        }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }

        .reveal { opacity: 0; transform: translateY(15px); transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .reveal.active { opacity: 1; transform: translateY(0); }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f8fafc; }
        ::-webkit-scrollbar-thumb { background: var(--pn-green); border-radius: 4px; }

        #mobile-menu { transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .nav-link-hover { position: relative; }
        .nav-link-hover::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 2px; background: white; transition: width 0.3s ease; }
        .nav-link-hover:hover::after { width: 100%; }
    </style>
</head>
<body class="bg-[#fcfdfd] selection:bg-pn selection:text-white">

    <div id="top-bar" class="bg-white py-2.5 text-[10px] text-center tracking-[0.1em] text-gray-400 font-semibold border-b">
        Pimpinan Anak Cabang Pencak Silat NU Pagarnusa<br>Kecamatan Kemang
    </div>

    <header class="bg-white/95 backdrop-blur-md py-5 border-b border-gray-100 sticky top-0 z-[60] shadow-sm">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div id="menu-toggle" class="p-2 -ml-2 cursor-pointer hover:text-pn transition md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
            </div>

            <div class="flex items-center space-x-4 mx-auto md:mx-0">
                <img src="https://lh3.googleusercontent.com/d/1drM76LlU3sdqpwo-Urq7ZULoyORC0UMQ" alt="Logo" class="h-12 md:h-14 drop-shadow-sm">
                <div class="text-left border-l-2 border-pn/20 pl-4">
                    <h1 class="text-2xl md:text-3xl font-bold text-pn tracking-tight leading-none nav-font uppercase">Pagar Nusa</h1>
                    <p class="text-gray-500 font-medium text-xs md:text-sm tracking-wide">Pagar NU dan Bangsa</p>
                </div>
            </div>

            <div class="relative hidden md:block">
                <div class="flex items-center bg-gray-50 border border-gray-100 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-pn/20 transition-all">
                    <input id="search-input" type="text" placeholder="Cari berita..." class="bg-transparent border-none text-sm outline-none w-48 focus:w-64 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                </div>
            </div>
        </div>
    </header>

    <nav class="bg-pn shadow-md hidden md:block">
        <div class="container mx-auto">
            <ul id="main-nav" class="flex flex-wrap justify-center items-center text-white nav-font uppercase tracking-widest text-[13px]">
                <li class="px-6 py-4 opacity-50">Memuat Menu...</li>
            </ul>
        </div>
    </nav>

    <div id="mobile-menu" class="fixed inset-y-0 left-0 w-72 bg-pn z-[70] transform -translate-x-full shadow-2xl md:hidden">
        <div class="p-8">
            <div class="flex justify-between items-center border-b border-white/10 pb-6 mb-6">
                <h2 class="text-white font-bold nav-font text-xl tracking-widest">MENU UTAMA</h2>
                <div id="close-menu" class="text-white p-2 cursor-pointer hover:bg-white/10 rounded-full transition">✕</div>
            </div>
            <ul id="mobile-nav-list" class="text-white space-y-5 nav-font uppercase tracking-wider text-lg"></ul>
        </div>
    </div>
    <div id="overlay" class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[65] hidden md:hidden"></div>

    <main class="container mx-auto px-4 py-10">
        <div id="headline-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-16">
            <div class="h-[400px] shimmer rounded-2xl"></div>
            <div class="h-[400px] shimmer rounded-2xl"></div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
            <div class="lg:col-span-2">
                <div class="flex items-end justify-between border-b-2 border-gray-100 mb-10 pb-2">
                    <h3 id="news-title-trigger" class="text-2xl font-bold nav-font tracking-tight border-b-4 border-pn -mb-[10px] pb-2 uppercase">Berita Terkini</h3>
                    <div id="search-status" class="text-xs text-gray-400 font-semibold mb-2"></div>
                </div>
                
                <div id="news-list" class="space-y-8">
                    <div class="flex flex-col md:flex-row gap-8">
                        <div class="md:w-64 h-48 bg-gray-100 rounded-2xl shimmer"></div>
                        <div class="flex-1 space-y-4">
                            <div class="h-4 bg-gray-100 w-24 rounded shimmer"></div>
                            <div class="h-8 bg-gray-100 w-full rounded shimmer"></div>
                        </div>
                    </div>
                </div>
            </div>

            <aside class="space-y-12">
                <div class="reveal">
                    <h3 class="text-xl font-bold border-b-2 border-gray-100 mb-6 pb-2 nav-font tracking-tight uppercase">
                        <span class="border-b-4 border-pn pb-2">Opini & Khazanah</span>
                    </h3>
                    <div class="bg-white shadow-sm p-6 border border-gray-100 rounded-2xl">
                        <ul id="opinion-list" class="divide-y divide-gray-50"></ul>
                    </div>
                </div>

                <div class="reveal bg-pn p-8 text-white rounded-3xl shadow-xl shadow-green-900/10 relative overflow-hidden group">
                    <div class="absolute -right-4 -top-4 opacity-10 transition-transform group-hover:scale-110">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-32 w-32" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /></svg>
                    </div>
                    <h4 class="nav-font text-2xl mb-4 font-bold uppercase tracking-wide">Sekretariat PAC</h4>
                    <p id="alamat-sekre" class="text-sm opacity-90 leading-relaxed mb-8">Memuat data alamat...</p>
                    <a id="btn-wa" href="#" target="_blank" class="flex items-center justify-center w-full py-4 bg-white text-pn font-bold rounded-xl text-xs uppercase tracking-widest hover:bg-yellow-400 transition-colors shadow-lg">
                        Hubungi Kami
                    </a>
                </div>
            </aside>
        </div>
    </main>

    <footer class="bg-white border-t border-gray-100 py-16 mt-20">
        <div class="container mx-auto px-4 text-center">
            <img src="https://lh3.googleusercontent.com/d/1drM76LlU3sdqpwo-Urq7ZULoyORC0UMQ" class="h-20 mx-auto mb-8 opacity-90">
            <p class="font-bold text-pn text-2xl nav-font uppercase mb-4 tracking-[0.2em]">PAC Pagar Nusa Kemang</p>
            <div id="copyright-text" class="text-gray-400 text-[11px] tracking-widest max-w-md mx-auto leading-relaxed border-t border-gray-50 pt-8">
                © 2026 Lembaga IT & Infokom PAC Pagar Nusa Kecamatan Kemang
            </div>
        </div>
    </footer>

<script>
    const API_URL = 'https://script.google.com/macros/s/AKfycbxrjbI6ZzqcX4zurydbnqAo8GvNdsKzQ0nODvelWFJlPJGAjaUPw7u64CdMNaoZTvZ-/exec'; 
    let allNews = [];

    const toggle = document.getElementById('menu-toggle');
    const menu = document.getElementById('mobile-menu');
    const overlay = document.getElementById('overlay');
    const closeBtn = document.getElementById('close-menu');

    function toggleMenu() {
        menu.classList.toggle('-translate-x-full');
        overlay.classList.toggle('hidden');
        document.body.classList.toggle('overflow-hidden');
    }

    toggle.onclick = toggleMenu;
    overlay.onclick = toggleMenu;
    closeBtn.onclick = toggleMenu;

    async function fetchContent() {
        try {
            const response = await fetch(API_URL);
            const res = await response.json();
            if (res.status !== "success") throw new Error(res.message);
            
            allNews = res.berita;

            if(res.profil) {
                document.getElementById('alamat-sekre').innerHTML = res.profil.alamat || "Alamat belum diatur.";
                document.getElementById('copyright-text').innerText = res.profil.copyright || `© ${new Date().getFullYear()} PAC Pagar Nusa Kemang`;
                
                if(res.profil.wa) {
                    let waNum = res.profil.wa.toString().replace(/\D/g,'');
                    if(waNum.startsWith('0')) waNum = '62' + waNum.slice(1);
                    document.getElementById('btn-wa').href = `https://wa.me/${waNum}`;
                }
            }

            const navContainer = document.getElementById('main-nav');
            const mobileNav = document.getElementById('mobile-nav-list');
            navContainer.innerHTML = '';
            mobileNav.innerHTML = '';

            if(res.navigasi) {
                res.navigasi.forEach(menuItem => {
                    const label = menuItem[0];
                    const link = menuItem[1];
                    const isJoin = label.toLowerCase().includes('join');
                    
                    const li = document.createElement('li');
                    li.className = "group";
                    li.innerHTML = `<a href="${link}" class="px-6 py-5 block transition-colors nav-link-hover ${isJoin ? 'text-yellow-400 font-bold' : 'hover:bg-white/5'}">${label}</a>`;
                    
                    if(link === '#' || link === '') {
                        li.onclick = (e) => { e.preventDefault(); filterByCategory(label); };
                    }
                    navContainer.appendChild(li);

                    const mLi = document.createElement('li');
                    mLi.className = "border-b border-white/5 pb-2";
                    mLi.innerHTML = `<a href="${link}" class="block py-1 ${isJoin ? 'text-yellow-400' : ''}">${label}</a>`;
                    if(link === '#' || link === '') {
                        mLi.onclick = (e) => { e.preventDefault(); toggleMenu(); filterByCategory(label); };
                    }
                    mobileNav.appendChild(mLi);
                });
            }
            renderBerita(allNews);
        } catch (error) { 
            document.getElementById('news-list').innerHTML = `<div class="p-8 bg-red-50 text-red-600 rounded-2xl text-center border border-red-100 font-medium">Gagal memuat data: ${error.message}</div>`;
        }
    }

    function filterByCategory(catName) {
        const filtered = allNews.filter(n => n.kategori.toUpperCase() === catName.toUpperCase());
        document.getElementById('news-title-trigger').innerText = catName;
        renderBerita(filtered, true);
        window.scrollTo({top: 450, behavior: 'smooth'});
    }

    function renderBerita(data, isSearch = false) {
        const headlineGrid = document.getElementById('headline-grid');
        const newsList = document.getElementById('news-list');
        const opinionList = document.getElementById('opinion-list');
        const status = document.getElementById('search-status');

        if(!isSearch) headlineGrid.innerHTML = '';
        newsList.innerHTML = ''; 
        opinionList.innerHTML = '';
        status.innerText = isSearch ? `Ditemukan ${data.length} hasil` : '';

        if (data.length === 0) {
            newsList.innerHTML = '<div class="text-center py-20 text-gray-300 font-bold tracking-widest uppercase">Konten Tidak Ditemukan</div>';
            return;
        }

        data.forEach((item, index) => {
            const detailLink = `detail.html?id=${item.id}`;
            const imgSrc = item.gambar || 'https://placehold.co/800x600/2d6a4f/ffffff?text=Pagar+Nusa';

            if (!isSearch && index < 2) {
                headlineGrid.innerHTML += `
                    <a href="${detailLink}" class="relative h-[400px] bg-slate-900 overflow-hidden group rounded-3xl shadow-lg reveal">
                        <img src="${imgSrc}" class="w-full h-full object-cover opacity-60 transition duration-1000 group-hover:scale-105" loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-8 text-white">
                            <span class="bg-pn px-3 py-1 text-[10px] font-bold uppercase tracking-widest rounded-md">${item.kategori}</span>
                            <h2 class="text-2xl md:text-3xl font-bold mt-4 group-hover:text-yellow-400 transition-colors leading-tight nav-font uppercase">${item.judul}</h2>
                            <p class="text-[10px] mt-4 opacity-60 uppercase tracking-widest font-bold">${item.tanggal}</p>
                        </div>
                    </a>`;
            }

            const cat = item.kategori.toLowerCase();
            if (cat.includes('opini') || cat.includes('khazanah')) {
                opinionList.innerHTML += `
                    <li class="py-5 group reveal">
                        <a href="${detailLink}" class="font-bold group-hover:text-pn transition-colors block text-gray-700 text-base leading-snug mb-2">${item.judul}</a>
                        <div class="flex items-center space-x-3 mt-1">
                             <span class="text-[9px] text-gray-400 uppercase font-bold tracking-tighter">${item.tanggal}</span>
                             <span class="text-[9px] text-pn font-bold uppercase tracking-tighter">${item.kategori}</span>
                        </div>
                    </li>`;
            } 
            
            // C. Main News List (LAYOUT HORIZONTAL SESUAI GAMBAR)
            if (isSearch || index >= 2) {
                newsList.innerHTML += `
                    <a href="${detailLink}" class="flex gap-4 items-start group reveal border-b border-gray-50 pb-6">
                        <div class="w-32 h-20 md:w-40 md:h-24 flex-shrink-0 overflow-hidden rounded-md bg-gray-100">
                            <img src="${imgSrc}" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" loading="lazy">
                        </div>
                        
                        <div class="flex-1">
                            <h4 class="text-base md:text-xl font-bold text-gray-900 leading-tight group-hover:text-pn transition-colors line-clamp-2 uppercase nav-font tracking-tight">
                                ${item.judul}
                            </h4>
                            <div class="flex items-center mt-2 text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-400 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <span class="text-[10px] md:text-xs font-bold uppercase tracking-widest">${item.tanggal}</span>
                            </div>
                        </div>
                    </a>`;
            }
        });
        initScrollReveal();
    }

    document.getElementById('search-input').addEventListener('input', (e) => {
        const val = e.target.value.toLowerCase();
        if(val.length > 2) {
            const filtered = allNews.filter(n => n.judul.toLowerCase().includes(val) || n.kategori.toLowerCase().includes(val));
            document.getElementById('news-title-trigger').innerText = "Hasil Pencarian";
            renderBerita(filtered, true);
        } else if (val.length === 0) {
            document.getElementById('news-title-trigger').innerText = "Berita Terkini";
            renderBerita(allNews);
        }
    });

    function initScrollReveal() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) entry.target.classList.add('active');
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    }

    document.addEventListener('DOMContentLoaded', fetchContent);
</script>
</body>

</html>
